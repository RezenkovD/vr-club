{% extends "base/base.html" %}
{% load static %}
{% load socialaccount %}
{% load i18n %}
{% block head %}
<link rel="stylesheet" href="{% static 'style/signup.css' %}">
{% endblock %}
{% block intro_bg_block %}
<div class="intro_bg_block">
    <div class="ellipse-1"></div>
    <div class="ellipse-3"></div>
    {% include 'svg-objects/signup-blue-object.html' %}
    {% include 'svg-objects/signup-yellow-object.html' %}
</div>

{% endblock %}
{% block main %}
<section>
    <div class="main">
        <div>
            <div class="main-text">
                <span><span class="span1">Зареєструйся та отримуй </span><span class="span2">знижку
                        10%<span class="span1">*</span</span></span>
            </div>
            <div class="sub-main-text">*на першу гру в нашому клубі</div>
        </div>
        {% block content %}
        <form class="signup" id="signup_form" method="post" action="{% url 'account_signup' %}">
            {% csrf_token %}
            <div class="sign-up-form">
                <div class="column">
                    {% if form.first_name.errors %}
                    <div class="input-container">
                        <label for="{{ form.first_name.id_for_label }}">
                            <div class="frame-23">
                                <span class="e1">Ваше ім’я</span>
                                <span class="e2">*</span>
                            </div>
                        </label>
                        {{ form.first_name }}
                        <div class="error-container">
                            {% for error in form.first_name.errors %}
                            <div class="alert alert-error" style="margin-top: 4px">
                                {{ error|escape }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% else %}
                    <div class="input-container">
                        <label for="{{ form.first_name.id_for_label }}">
                            <div class="frame-23">
                                <span class="e1">Ваше ім’я</span>
                                <span class="e2">*</span>
                            </div>
                        </label>
                        {{ form.first_name }}
                    </div>
                    {% endif %}
                    {% if form.email.errors %}
                    <div class="input-container">
                        <label for="{{ form.email.id_for_label }}">
                            <span class="e1">Електронна адреса</span>
                            <span class="e2">*</span>
                        </label>
                        {{ form.email }}
                        <div class="error-container">
                            {% for error in form.email.errors %}
                            <div class="alert alert-error" style="margin-top: 4px">
                                {{ error|escape }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% else %}
                    <div class="input-container">
                        <label for="{{ form.email.id_for_label }}">
                            <span class="e1">Електронна адреса</span>
                            <span class="e2">*</span>
                        </label>
                        {{ form.email }}
                    </div>
                    {% endif %}
                </div>
                <div class="column">
                    {% if form.password1.errors %}
                    <div class="input-container">
                        <label for="{{ form.password1.id_for_label }}">
                            <span class="e1">Пароль</span>
                            <span class="e2">*</span>
                        </label>
                        <div class="password-input">
                            {{ form.password1 }}
                            <button class="transparent-button" type="button"
                                onclick="toggleOnePasswordVisibility('{{ form.password1.id_for_label }}')">
                                <svg id="eye-icon-one" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="#4FB4FE" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M4.5 3.75L19.5 20.25" />
                                    <path
                                        d="M14.522 14.775C13.8338 15.4054 12.9334 15.7535 12.0001 15.75C11.2432 15.7499 10.5041 15.5208 9.87984 15.0928C9.25561 14.6647 8.77551 14.0579 8.50265 13.3519C8.22979 12.6459 8.17695 11.8739 8.35107 11.1373C8.52519 10.4007 8.91812 9.73406 9.47821 9.22498" />
                                    <path
                                        d="M6.9375 6.43127C3.1125 8.36252 1.5 12 1.5 12C1.5 12 4.5 18.75 12 18.75C13.7574 18.7643 15.4929 18.3594 17.0625 17.5688" />
                                    <path
                                        d="M19.5562 15.8531C21.6 14.025 22.5 12 22.5 12C22.5 12 19.5 5.25002 12 5.25002C11.3498 5.24874 10.7006 5.30205 10.0593 5.4094" />
                                    <path
                                        d="M12.7031 8.31567C13.5006 8.46678 14.2273 8.87317 14.7735 9.47353C15.3198 10.0739 15.6559 10.8356 15.7313 11.6438" />
                                </svg>
                            </button>
                        </div>
                        <div class="error-container">
                            {% for error in form.password1.errors %}
                            <div class="alert alert-error" style="margin-top: 4px">
                                {{ error|escape }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% else %}
                    <div class="input-container">
                        <label for="{{ form.password1.id_for_label }}">
                            <span class="e1">Пароль</span>
                            <span class="e2">*</span>
                        </label>
                        <div class="password-input">
                            {{ form.password1 }}
                            <button class="transparent-button" type="button"
                                onclick="toggleOnePasswordVisibility('{{ form.password1.id_for_label }}')">
                                <svg id="eye-icon-one" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="#4FB4FE" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M4.5 3.75L19.5 20.25" />
                                    <path
                                        d="M14.522 14.775C13.8338 15.4054 12.9334 15.7535 12.0001 15.75C11.2432 15.7499 10.5041 15.5208 9.87984 15.0928C9.25561 14.6647 8.77551 14.0579 8.50265 13.3519C8.22979 12.6459 8.17695 11.8739 8.35107 11.1373C8.52519 10.4007 8.91812 9.73406 9.47821 9.22498" />
                                    <path
                                        d="M6.9375 6.43127C3.1125 8.36252 1.5 12 1.5 12C1.5 12 4.5 18.75 12 18.75C13.7574 18.7643 15.4929 18.3594 17.0625 17.5688" />
                                    <path
                                        d="M19.5562 15.8531C21.6 14.025 22.5 12 22.5 12C22.5 12 19.5 5.25002 12 5.25002C11.3498 5.24874 10.7006 5.30205 10.0593 5.4094" />
                                    <path
                                        d="M12.7031 8.31567C13.5006 8.46678 14.2273 8.87317 14.7735 9.47353C15.3198 10.0739 15.6559 10.8356 15.7313 11.6438" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    {% endif %}
                    {% if form.password2.errors %}
                    <div class="input-container">
                        <label for="{{ form.password2.id_for_label }}">
                            <span class="e1">Підтвердіть пароль</span>
                            <span class="e2">*</span>
                        </label>
                        <div class="password-input">
                            {{ form.password2 }}
                            <button class="transparent-button" type="button"
                                onclick="toggleTwoPasswordVisibility('{{ form.password2.id_for_label }}')">
                                <svg id="eye-icon-two" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="#4FB4FE" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M4.5 3.75L19.5 20.25" />
                                    <path
                                        d="M14.522 14.775C13.8338 15.4054 12.9334 15.7535 12.0001 15.75C11.2432 15.7499 10.5041 15.5208 9.87984 15.0928C9.25561 14.6647 8.77551 14.0579 8.50265 13.3519C8.22979 12.6459 8.17695 11.8739 8.35107 11.1373C8.52519 10.4007 8.91812 9.73406 9.47821 9.22498" />
                                    <path
                                        d="M6.9375 6.43127C3.1125 8.36252 1.5 12 1.5 12C1.5 12 4.5 18.75 12 18.75C13.7574 18.7643 15.4929 18.3594 17.0625 17.5688" />
                                    <path
                                        d="M19.5562 15.8531C21.6 14.025 22.5 12 22.5 12C22.5 12 19.5 5.25002 12 5.25002C11.3498 5.24874 10.7006 5.30205 10.0593 5.4094" />
                                    <path
                                        d="M12.7031 8.31567C13.5006 8.46678 14.2273 8.87317 14.7735 9.47353C15.3198 10.0739 15.6559 10.8356 15.7313 11.6438" />
                                </svg>
                            </button>
                        </div>
                        <div class="error-container">
                            {% for error in form.password2.errors %}
                            <div class="alert alert-error" style="margin-top: 4px">
                                {{ error|escape }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% else %}
                    <div class="input-container">
                        <label for="{{ form.password2.id_for_label }}">
                            <span class="e1">Підтвердіть пароль</span>
                            <span class="e2">*</span>
                        </label>
                        <div class="password-input">
                            {{ form.password2 }}
                            <button class="transparent-button" type="button"
                                onclick="toggleTwoPasswordVisibility('{{ form.password2.id_for_label }}')">
                                <svg id="eye-icon-two" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="#4FB4FE" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M4.5 3.75L19.5 20.25" />
                                    <path
                                        d="M14.522 14.775C13.8338 15.4054 12.9334 15.7535 12.0001 15.75C11.2432 15.7499 10.5041 15.5208 9.87984 15.0928C9.25561 14.6647 8.77551 14.0579 8.50265 13.3519C8.22979 12.6459 8.17695 11.8739 8.35107 11.1373C8.52519 10.4007 8.91812 9.73406 9.47821 9.22498" />
                                    <path
                                        d="M6.9375 6.43127C3.1125 8.36252 1.5 12 1.5 12C1.5 12 4.5 18.75 12 18.75C13.7574 18.7643 15.4929 18.3594 17.0625 17.5688" />
                                    <path
                                        d="M19.5562 15.8531C21.6 14.025 22.5 12 22.5 12C22.5 12 19.5 5.25002 12 5.25002C11.3498 5.24874 10.7006 5.30205 10.0593 5.4094" />
                                    <path
                                        d="M12.7031 8.31567C13.5006 8.46678 14.2273 8.87317 14.7735 9.47353C15.3198 10.0739 15.6559 10.8356 15.7313 11.6438" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% if redirect_field_value %}
            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
            {% endif %}
            <div class="sub-flex-container">
                <div class="subtext">
                    <span>
                        <span class="span1">Вже маю обліковий запис. </span>
                        <a href="{{ login_url }}"><span class="span2">Увійти!</span></a>
                    </span>
                </div>
                <button class="btn-blue" type="submit">Зареєструватись</button>
                <div class="subtext-or">АБО ЗАРЕЄСТРУВАТИСЬ ЧЕРЕЗ</div>
                <div class="google-img">
                    <a href="{% provider_login_url 'google' %}"><img class="google-logo-white-2015-1"
                            src="{% static 'static_files/Google_logo_white_2015_1.png' %}" /></a>
                </div>
            </div>
        </form>
        {% endblock %}
    </div>
</section>
{% endblock %}
{% block script %}
<script>
    function adjustColumnStyle() {
        var columnElements = document.querySelectorAll(".column");
        var secondColumn = document.querySelector(".column + .column");
        var firstColumn = columnElements[0];

        var firstHasError = false;
        {% if form.password1.errors or form.first_name.errors %}
        firstHasError = true;
        {% endif %}
        if (firstHasError){
            secondColumn.style.gap= "0";
        }

        var hasError = false;
        {% if form.password2.errors or form.email.errors %}
        hasError = true;
        {% endif %}

        if (window.innerWidth < 768) {
            columnElements.forEach(function (column) {
                column.style.marginBottom = hasError ? "auto" : "20px";
            });
            firstColumn.style.marginBottom = hasError ? "0" : "12px";
        } else {
            columnElements.forEach(function (column) {
                column.style.marginBottom = hasError ? "auto" : "44px";
            });
            firstColumn.style.marginBottom = hasError ? "0" : "12px";
        }
    }

    document.addEventListener("DOMContentLoaded", adjustColumnStyle);
    document.querySelector("#id_password2").addEventListener("input", adjustColumnStyle);
    document.querySelector("#id_email").addEventListener("input", adjustColumnStyle);
    document.querySelector("#id_first_name").addEventListener("input", adjustColumnStyle);
    document.querySelector("#id_password1").addEventListener("input", adjustColumnStyle);

    window.addEventListener("resize", adjustColumnStyle);
</script>
<script src="{% static 'js/account.js' %}"></script>
{% endblock %}
